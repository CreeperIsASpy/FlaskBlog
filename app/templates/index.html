{% extends "base.html" %}

{% block title %}é¦–é¡µ - å…­(5)ç­ ç­çº§åšå®¢{% endblock %}

{% block content %}
    <h1>æ¬¢è¿æ¥åˆ°å…­(5)ç­ç­çº§åšå®¢ï¼</h1>
    <p>åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥é˜…è¯»åŒå­¦ä»¬çš„æœ€æ–°åšæ–‡ï¼Œä¹Ÿå¯ä»¥å‘å¸ƒè‡ªå·±çš„æ–‡ç« ï¼</p>

    <h2>æœ€æ–°åšæ–‡ç²¾é€‰</h2>
    {% if posts %}
        <ul class="post-list">
            {% for post in posts %}
                <li class="post-item">
                    <h3><a href="{{ url_for('main.view_post', post_id=post.id) }}" class="post-link">{{ post.title }}</a></h3>
                    <p>ä½œè€…ï¼š{{ post.author.username }} | å‘å¸ƒæ—¶é—´ï¼š{{ post.created_at.strftime('%Y-%m-%d %T') }} | <em class="hint">Markdown æ ¼å¼é¢„è§ˆä¸å¯ç”¨â€¦â€¦</em></p>
                    <p>{{ (post.content[:80] + '...') if (len(post.content) > 80) else post.content }}</p>
                    <div class="post-meta">
                        <span class="like-count">ğŸ‘ {{ post.likes|length }} äººç‚¹èµ</span>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>è¿˜æ²¡æœ‰äººå‘å¸ƒåšæ–‡ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€ä¸ªå§ï¼</p>
    {% endif %}

    <h2>æœ€å—æ¬¢è¿åšæ–‡</h2>
    {% if popular_posts %}
        <ul class="post-list">
            {% for post in popular_posts %}
                <li class="post-item">
                    <h3><a href="{{ url_for('main.view_post', post_id=post.id) }}" class="post-link">{{ post.title }}</a></h3>
                    <p>ä½œè€…ï¼š{{ post.author.username }} | å‘å¸ƒæ—¶é—´ï¼š{{ post.created_at }} | <em class="hint">Markdown æ ¼å¼é¢„è§ˆä¸å¯ç”¨â€¦â€¦</em></p>
                    <p>{{ (post.content[:80] + '...') if (len(post.content) > 80) else post.content }}</p>
                    <div class="post-meta">
                        <span class="like-count">ğŸ‘ {{ post.likes|length }} äººç‚¹èµ</span>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>è¿˜æ²¡æœ‰åšæ–‡è¢«ç‚¹èµã€‚</p>
    {% endif %}

    {% if current_user.is_authenticated %}
        <button onclick="window.location.href='{{ url_for('main.create_post') }}'" class="form-button">å‘å¸ƒä¸€ç¯‡æ–°çš„åšæ–‡ï¼</button>
    {% else %}
        <div class="auth-buttons">
            <button onclick="window.location.href='{{ url_for('auth.login') }}'" class="form-button">ç™»å½•</button>
            <button onclick="window.location.href='{{ url_for('auth.register') }}'" class="form-button">æ³¨å†Œ</button>
        </div>
    {% endif %}

    <iframe class="music" frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1826335149&auto=1&height=66"></iframe>

{% endblock %}